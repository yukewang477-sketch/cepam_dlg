import matplotlib.pyplot as plt
import numpy as np

# Input data for seven baselines and 80 iterations
# Replace the placeholder lists with your actual data
iterations = np.arange(1, 81)  # 80 iterations (x-axis)

data_cnn = {
    'vanilla FL': [10.797, 12.389, 14.61, 17.021, 19.62, 23.743, 25.87, 28.887, 33.565, 36.786, 39.068, 43.353, 45.735, 51.667, 54.449, 58.141, 61.287, 63.891, 67.196, 70.526, 72.121, 73.744, 76.074, 76.998, 78.163, 79.77, 80.3, 80.949, 81.798, 82.628, 84.141, 84.509, 84.972, 85.734, 86.002, 86.433, 86.95, 87.352, 87.928, 88.066, 88.277, 88.359, 88.869, 89.364, 89.316, 89.71, 89.826, 89.771, 90.112, 90.094, 90.103, 90.36, 90.55, 90.678, 90.735, 90.803, 90.727, 90.912, 90.996, 91.094, 91.133, 91.172, 91.285, 91.215, 91.289, 91.345, 91.399, 91.471, 91.52, 91.545, 91.574, 91.596, 91.675, 91.688, 91.709, 91.736, 91.692, 91.688, 91.7, 91.693],
    'FL+SDQ': [10.797, 12.388, 14.605, 17.028, 19.622, 23.841, 25.872, 28.983, 33.584, 36.805, 39.062, 43.362, 45.71, 51.673, 54.487, 58.19, 61.353, 63.88, 67.237, 70.572, 72.116, 73.709, 76.122, 77.073, 78.209, 79.771, 80.252, 80.99, 81.853, 82.606, 84.15, 84.555, 85.004, 85.765, 85.97, 86.434, 86.977, 87.355, 87.966, 88.055, 88.239, 88.368, 88.894, 89.351, 89.305, 89.757, 89.789, 89.776, 90.107, 90.098, 90.134, 90.383, 90.569, 90.67, 90.733, 90.756, 90.703, 90.891, 90.943, 91.064, 91.115, 91.173, 91.301, 91.255, 91.268, 91.375, 91.433, 91.514, 91.53, 91.509, 91.597, 91.607, 91.64, 91.67, 91.695, 91.728, 91.726, 91.697, 91.708, 91.729],
    'FL+Gaussian': [10.811, 12.074, 12.978, 15.724, 18.515, 21.212, 25.108, 28.779, 33.276, 35.943, 39.95, 43.145, 48.314, 52.362, 53.695, 57.861, 62.101, 65.619, 67.155, 70.822, 73.151, 74.768, 75.794, 77.586, 78.407, 79.816, 81.368, 82.016, 82.994, 83.086, 84.023, 84.882, 85.298, 86.276, 86.24, 86.774, 87.13, 87.307, 88.016, 88.023, 88.541, 88.92, 88.965, 89.252, 89.217, 89.471, 89.724, 89.726, 90.001, 90.211, 90.345, 90.457, 90.68, 90.79, 90.868, 90.973, 91.007, 91.095, 91.07, 91.155, 91.275, 91.408, 91.362, 91.406, 91.435, 91.506, 91.553, 91.591, 91.634, 91.655, 91.656, 91.688, 91.726, 91.763, 91.741, 91.753, 91.778, 91.801, 91.814, 91.837],
    'FL+Gaussian+SDQ': [10.812, 12.074, 13.018, 15.717, 18.62, 21.278, 25.103, 28.952, 33.304, 35.952, 39.957, 43.101, 48.218, 52.213, 53.742, 57.903, 62.103, 65.62, 67.123, 70.808, 73.171, 74.741, 75.76, 77.64, 78.375, 79.774, 81.387, 82.055, 83.007, 83.033, 83.963, 84.823, 85.256, 86.293, 86.253, 86.728, 87.073, 87.3, 87.95, 88.021, 88.515, 88.898, 88.911, 89.179, 89.182, 89.351, 89.685, 89.69, 89.967, 90.161, 90.299, 90.459, 90.66, 90.74, 90.83, 90.944, 90.979, 91.1, 91.032, 91.146, 91.288, 91.411, 91.376, 91.414, 91.455, 91.501, 91.555, 91.621, 91.687, 91.684, 91.671, 91.678, 91.727, 91.789, 91.78, 91.747, 91.814, 91.849, 91.844, 91.841],
    'FL+CEPAM-Gaussian (n=1)': [11.131, 14.076, 15.654, 19.59, 25.249, 28.261, 30.408, 33.844, 40.492, 43.149, 48.484, 53.692, 57.083, 63.882, 66.604, 68.601, 71.214, 73.371, 75.253, 78.378, 79.053, 80.282, 82.072, 82.127, 83.22777778, 84.52777778, 84.71888889, 85.35333333, 85.96888889, 86.74222222, 87.61888889, 87.60222222, 87.83555556, 88.50111111, 88.63333333, 88.90444444, 89.15222222, 89.72888889, 89.82888889, 90.03666667, 90.01666667, 90.37888889, 90.74333333, 91.17111111, 90.89333333, 91.07444444, 91.34, 91.36222222, 91.51222222, 91.57333333, 91.62111111, 91.73222222, 91.78777778, 91.94, 92.01666667, 92.10222222, 92.06333333, 92.21222222, 92.27666667, 92.32444444, 92.35555556, 92.34666667, 92.36555556, 92.41555556, 92.4, 92.47444444, 92.48888889, 92.54, 92.57333333, 92.58333333, 92.62222222, 92.65111111, 92.67555556, 92.68555556, 92.67888889, 92.70222222, 92.72555556, 92.74, 92.74333333, 92.74111111],
    'FL+CEPAM-Gaussian (n=2)': [11.022, 13.639, 15.394, 18.654, 23.549, 27.068, 28.942, 31.908, 37.783, 40.677, 45.129, 50.501, 53.504, 60.005, 63.573, 66.08, 68.893, 70.774, 72.9, 76.324, 77.196, 78.473, 80.627, 80.882, 82.136, 83.307, 83.691, 84.348, 84.817, 85.768, 86.737, 87.063, 87.401, 87.87, 88.049, 88.419, 88.91, 89.211, 89.55, 89.654, 89.601, 89.98, 90.17, 90.701, 90.53, 90.792, 91.004, 90.883, 91.263, 91.238, 91.353, 91.424, 91.58, 91.652, 91.705, 91.771, 91.771, 91.944, 92.043, 92.01, 92.021, 92.094, 92.107, 92.113, 92.153, 92.172, 92.17, 92.213, 92.271, 92.261, 92.306, 92.16555556, 92.16444444, 92.19, 92.21666667, 92.21333333, 92.23555556, 92.23444444, 92.24, 92.25555556],
    'FL+CEPAM-Gaussian (n=3)': [10.725, 12.717, 14.368, 16.906, 20.266, 24.53, 26.788, 30.302, 34.42, 38.308, 41.001, 46.927, 49.55, 56.046, 58.762, 62.483, 65.687, 68.031, 70.472, 74.149, 75.188, 76.693, 78.659, 79.583, 80.472, 82.028, 82.121, 83.12, 83.888, 84.635, 85.973, 86.307, 86.592, 87.192, 87.597, 87.822, 88.137, 88.806, 89.037, 89.197, 89.081, 89.443, 89.848, 90.235, 90.312, 90.581, 90.724, 90.648, 91.042, 91.027, 90.975, 91.179, 91.359, 91.412, 91.509, 91.53, 91.505, 91.718, 91.784, 91.896, 91.866, 91.958, 92.004, 92.032, 92.084, 92.082, 92.089, 92.089, 92.118, 92.145, 92.15, 92.209, 92.243, 92.271, 92.298, 92.303, 92.307, 92.289, 92.288, 92.287] 
}

data_mlp = {
    'vanilla FL': [11.455, 16.332, 18.859, 22.2, 27.015, 27.044, 31.487, 34.4, 36.69, 39.72, 39.274, 43.684, 45.539, 47.899, 49.832, 53.874, 55.253, 56.427, 58.637, 60.311, 61.065, 60.661, 63.072, 63.637, 64.007, 66.335, 66.186, 66.971, 69.108, 69.839, 70.528, 70.687, 71.368, 71.557, 72.169, 72.65, 73.885, 74.332, 74.334, 73.659, 75.513, 76.031, 75.876, 76.757, 76.873, 76.463, 77.464, 77.436, 78.109, 78.226, 78.391, 78.832, 79.223, 79.343, 79.605, 79.785, 80.318, 80.23555556, 80.39333333, 80.56444444, 80.53666667, 80.56111111, 80.53777778, 80.90111111, 80.97444444, 81.08222222, 81.12555556, 81.29888889, 81.58888889, 81.44555556, 81.48111111, 81.65444444, 81.70222222, 81.73888889, 81.84777778, 81.84666667, 81.83666667, 81.91555556, 81.96555556, 82.06],
    'FL+SDQ': [11.456, 16.325, 18.973, 22.17, 26.672, 27.031, 31.57, 34.403, 36.703, 39.8, 39.342, 43.554, 45.557, 47.979, 49.684, 53.902, 55.52, 56.547, 58.746, 60.39, 60.888, 60.62, 63.179, 63.58, 63.997, 66.379, 66.186, 66.993, 69.177, 69.846, 70.469, 70.745, 71.363, 71.472, 72.108, 72.642, 73.93, 74.357, 74.11, 74.075, 75.475, 76.219, 75.977, 76.697, 77.108, 76.656, 77.397, 77.401, 78.268, 78.263, 78.389, 78.631, 79.166, 79.268, 79.472, 79.785, 80.243, 80.293, 80.596, 80.472, 80.472, 80.724, 80.756, 81.119, 81.082, 81.19, 81.299, 81.352, 81.601, 81.599, 81.585, 81.821, 81.835, 81.99, 82.044, 82.104, 82.108, 82.095, 82.185, 82.171],
    'FL+Gaussian': [11.442, 14.216, 18.087, 19.688, 22.909, 26.889, 32.356, 33.315, 36.014, 38.403, 39.488, 43.462, 46.22, 48.201, 50.386, 52.97, 54.848, 57.179, 57.575, 58.886, 59.646, 61.606, 62.843, 63.895, 64.353, 65.597, 67.101, 67.077, 68.72, 70.024, 70.077, 70.242, 71.757, 72.77, 73.144, 73.568, 72.68, 74.063, 74.111, 75.532, 75.572, 76.311, 77.072, 76.936, 76.79, 78.115, 77.686, 77.856, 77.861, 78.104, 78.561, 79.068, 79.846, 79.279, 79.665, 79.749, 80.03, 80.242, 80.286, 80.772, 80.746, 80.925, 81.182, 81.205, 81.294, 81.661, 81.558, 81.723, 81.624, 81.779, 81.808, 81.851, 81.896, 81.925, 82.022, 81.996, 82.057, 82.088, 82.166, 82.233],
    'FL+Gaussian+SDQ': [11.442, 14.199, 17.997, 19.585, 23.048, 27.092, 32.353, 33.578, 36.083, 38.653, 39.936, 43.348, 46.308, 48.366, 50.434, 52.995, 54.824, 57.163, 57.733, 59.144, 59.774, 61.859, 62.924, 64.11, 64.489, 65.796, 67.189, 67.384, 68.927, 70.337, 70.339, 70.277, 71.914, 72.87, 73.167, 73.748, 72.691, 74.226, 74.56, 75.795, 75.761, 76.473, 77.317, 77.17, 76.815, 77.959, 77.635, 78.05, 77.869, 78.15, 78.655, 79.158, 79.781, 78.854, 79.616, 79.812, 80.163, 80.314, 80.35, 80.786, 80.884, 80.995, 81.143, 81.289, 81.371, 81.654, 81.478, 81.549, 81.628, 81.743, 81.809, 81.827, 81.922, 82.043, 82.126, 82.082, 82.181, 82.237, 82.2, 82.258],
    'FL+CEPAM-Gaussian (n=1)':[11.636, 16.8, 21.697, 23.511, 30.077, 28.114, 32.229, 36.758, 41.893, 42.252, 45.39, 50.461, 52.993, 53.433, 56.188, 58.552, 59.834, 61.141, 63.308, 64.928, 64.992, 65.062, 68.214, 66.986, 67.597, 69.762, 70.301, 70.781, 72.397, 73.543, 73.602, 74.703, 74.889, 74.57, 76.263, 76.39, 76.748, 77.426, 77.117, 77.284, 78.791, 79.016, 78.858, 80.06, 79.656, 80.185, 81.195, 80.535, 80.503, 81.213, 81.408, 81.41, 81.987, 81.885, 82.158, 82.596, 82.857, 82.895, 83, 83.197, 83.044, 83.04, 82.858, 83.227, 83.222, 83.219, 83.408, 83.46, 83.758, 83.614, 83.666, 83.736, 83.757, 83.735, 83.773, 83.886, 83.858, 83.89, 83.922, 83.989],
    'FL+CEPAM-Gaussian (n=2)': [11.611, 16.443, 20.91, 22.927, 30.213, 28.356, 32.99, 36.421, 40.114, 41.451, 42.877, 48.511, 51.447, 52.465, 54.16, 57.384, 59.239, 59.704, 62.421, 63.599, 64.446, 64.225, 66.997, 66.491, 66.806, 68.931, 69.466, 69.945, 72.005, 72.8, 73.157, 73.922, 74.163, 74.22, 75.34, 75.289, 76.354, 76.962, 76.608, 76.898, 78.258, 78.334, 78.525, 79.085, 78.976, 79.561, 80.366, 80.011, 80.374, 80.753, 80.959, 81.087, 81.109, 81.408, 81.42, 81.767, 82.075, 82.416, 82.305, 82.614, 82.363, 82.522, 82.475, 82.565, 82.65, 82.71, 82.901, 82.994, 83.28, 83.268, 83.185, 83.301, 83.407, 83.476, 83.505, 83.552, 83.368, 83.469, 83.487, 83.515],
    'FL+CEPAM-Gaussian (n=3)': [11.442, 16.359, 20.224, 23.417, 28.375, 28.752, 32.103, 36.547, 39.494, 41.151, 41.433, 47.622, 49.816, 51.479, 53.453, 56.339, 58.096, 58.815, 61.646, 62.753, 63.582, 63.307, 65.948, 65.426, 65.976, 68.493, 68.834, 69.199, 71.044, 71.78, 72.112, 72.775, 72.584, 72.903, 73.772, 74.186, 75.257, 75.637, 75.696, 76.02, 77.559, 77.551, 77.563, 78.256, 78.479, 78.278, 79.198, 79.162, 79.594, 79.732, 79.956, 80.11, 80.401, 80.652, 80.862, 81.081, 81.486, 81.631, 81.649, 81.747, 81.706, 81.852, 81.742, 82.059, 82.198, 82.151, 82.218, 82.393, 82.57, 82.622, 82.647, 82.689, 82.661, 82.615, 82.753, 82.816, 82.736, 82.776, 82.905, 82.841]
}

line_colors = {'vanilla FL': 'brown', 'FL+SDQ': 'purple', 'FL+Gaussian': 'blue', 'FL+Gaussian+SDQ': 'green', 'FL+CEPAM-Gaussian (n=1)': 'red', 'FL+CEPAM-Gaussian (n=2)': 'orange', 'FL+CEPAM-Gaussian (n=3)': 'olive'}
# Plot function
def plot_convergence(data, model_name, ax):
    for baseline, accuracy in data.items():
        ax.plot(iterations, accuracy, label=baseline, linewidth=1.0,color=line_colors[baseline])

    ax.set_xlabel('Communication round', fontsize=10)
    ax.set_ylabel('Accuracy', fontsize=10)
    ax.set_title(f'Convergence profiles of different FL schemes using {model_name}.', fontsize=12)
    ax.legend(fontsize=10, loc='lower right')
    ax.grid(alpha=0.3)

# Create the figure and subplots
# fig, axes = plt.subplots(1, 2, figsize=(14, 6)) # vertical
fig, axes = plt.subplots(1, 2, figsize=(14, 6)) # horizontal

# Plot MLP data
plot_convergence(data_mlp, 'MLP', axes[0])

# Plot CNN data
plot_convergence(data_cnn, 'CNN', axes[1])

# Adjust layout
fig.tight_layout()

# Add captions
fig.text(0.5, -0.02, 'Figure 1: Validation accuracy curves of CEPAM-Gaussian against Baselines using different neural network models.', 
         ha='center', fontsize=12)
#axes[0].text(40, -0.2, '(a) Convergence profiles of different FL schemes schemes using MLP', fontsize=12)
#axes[1].text(40, -0.2, '(b) Convergence profiles of different FL schemes schemes using CNN', fontsize=12)

# Show the plot

plt.savefig('flconvergence.png')